<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.roadscanner.dao.qna.QuestionDAO">


    <!-- 질문 작성/저장 -->
    <insert id="save" useGeneratedKeys="true" keyProperty="no">
        INSERT INTO QUESTION (category, id, title, content)
        VALUES (#{category}, #{id}, #{title}, #{content})
    </insert>

    <!-- no로 질문 조회 -->
    <select id="findById" resultType="QuestionVO">
        SELECT
            no,
            category,
            views,
            idx,
            id,
            title,
            content,
            create_date AS createDate,
            update_date AS updateDate
        FROM QUESTION
        WHERE no = #{no}
    </select>

    <!-- 모든 질문 조회 getAllQuestions에서 수정 -->
    <select id="findAll" resultType="QuestionVO">
        SELECT
            no,
            category,
            views,
            idx,
            id,
            title,
            content,
            create_date AS createDate,
            update_date AS updateDate
        FROM QUESTION
    </select>

    <!-- 질문 업데이트 -->
    <update id="update">
        UPDATE QUESTION
        SET
            category = #{category},
            id = #{id},
            idx = #{idx},
            title = #{title},
            content = #{content},
            update_date = NOW()
        WHERE no = #{no}
    </update>

</mapper>